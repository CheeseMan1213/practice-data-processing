apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "backend.fullname" . }}
  labels:
    app: {{ include "backend.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
spec:
    replicas: {{ .Values.backend.replicaCount }}
    selector:
        matchLabels:
        app: {{ include "backend.name" . }}
    template:
        metadata:
        labels:
            app: {{ include "backend.name" . }}
        spec:
        containers:
            - name: {{ .Chart.Name }}
            image: "{{ .Values.backend.image.repository }}:{{ .Values.backend.image.tag }}"
            imagePullPolicy: {{ .Values.backend.image.pullPolicy }}
            ports:
                - containerPort: 3002
            env:
                - name: FRONTEND_URL
                value: http://{{ include "frontend.fullname" . }}:{{ .Values.frontend.service.port }}
